<!DOCTYPE html><html lang="zh-CN"><head><title>老C的笔记本</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="stylesheet" href="../../layui/css/layui.css"><link rel="stylesheet" href="../../css/common.css"><link rel="stylesheet" href="../../css/post.css"><link rel="stylesheet" href="../../lib/prism/prism.css"><link rel="shortcut icon" href="../../img/favicon.ico"><link rel="stylesheet" href="../../lib/iconfont/iconfont.css"><meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="atom.xml" title="老C的搬砖日记" type="application/atom+xml"></head><body style="overflow:hidden" data-prismjs-copy="复制" data-prismjs-copy-success="复制成功!"><div class="qy-nav"><ul class="layui-nav" lay-filter="" lay-bar="disabled" lay-unselect><li class="hide-xs layui-nav-item" id="searchBtn" style="float:right"><a class="searchBtn" href="javascript:void(0);"><i class="layui-icon layui-icon-search"></i> 搜索</a></li><li class="hide-xs layui-nav-item" style="float:right"><a href="/study"><i class="layui-icon layui-icon-video"></i> 前端教程</a></li><li class="hide-xs layui-nav-item" style="float:right"><a target="_blank" rel="noopener" href="https://github.com/heliufang"><i class="icon iconfont icon-github"></i> github</a></li><li class="hide-xs layui-nav-item" style="float:right"><a target="_blank" rel="noopener" href="https://gitee.com/heliufang"><i class="icon iconfont icon-gitee"></i> gitee</a></li><li class="hide-xs layui-nav-item" style="float:right"><a target="_blank" rel="noopener" href="https://www.cnblogs.com/helf"><i class="icon iconfont icon-cnblogs"></i> 博客园</a></li><li class="layui-nav-item"><a class="title" href="/" style="padding:0"><i class="layui-anim layui-anim-rotate layui-anim-loop layui-icon layui-icon-star-fill"></i> 老C的笔记本</a></li><li class="hide-xs layui-nav-item" style="float:right"><a href="/about"><i class="layui-icon layui-icon-friends"></i> 关于</a></li><li class="hide-xs layui-nav-item" style="float:right"><a href="/archives"><i class="layui-icon layui-icon-date"></i> 归档</a></li><li class="hide-xs layui-nav-item" style="float:right"><a href="/tags"><i class="layui-icon layui-icon-note"></i> 标签</a></li><li class="hide-xs layui-nav-item" style="float:right"><a href="/categories"><i class="layui-icon layui-icon-template-1"></i> 分类</a></li><li class="hide-xs layui-nav-item" style="float:right"><a href="/"><i class="layui-icon layui-icon-home"></i> 首页</a></li><li class="layui-nav-item hide-sm hide-md hide-lg" style="float:right"><a href="javascript:;">菜单</a><dl class="layui-nav-child"><dd><a href="/">首页</a></dd><dd><a href="/archives">归档</a></dd><dd><a href="/tags">标签</a></dd><dd><a href="/categories">分类</a></dd><dd><a href="/about">关于</a></dd><dd><a href="/study">前端教程</a></dd><dd><a target="_blank" rel="noopener" href="https://github.com/heliufang" title="github">github</a></dd><dd><a target="_blank" rel="noopener" href="https://gitee.com/heliufang" title="gitee">gitee</a></dd><dd><a target="_blank" rel="noopener" href="https://www.cnblogs.com/helf" title="博客园">博客园</a></dd><dd><a href="javascript:void(0)" onclick='document.querySelector("#searchShade").style.display="block"'>搜索</a></dd></dl></li></ul><div id="loadingBox" class="loadingBox"><img src="/img/loading.gif"></div></div><div id="searchShade" class="searchShade"><div id="searchLayer"><div id="closeBtn" class="close"><i class="layui-icon layui-icon-close"></i></div><input id="searchTxt" type="text" placeholder="搜索文章(只支持文章标题关键字)" autofocus><div id="searchResult"></div></div></div><div class="layui-container center" id="top"><div class="layui-row layui-col-space20"><div class="layui-col-md3 hide-xs hide-sm"><div class="layui-card"><div class="layui-card-header"><i style="font-weight:700" class="layui-icon layui-icon-speaker"></i> 公告</div><div class="layui-card-body"><div class="userinfo"><img src="/head.png"><div class="name">淡泊明志，宁静致远</div><div class="icons"><a target="_blank" rel="noopener" href="https://github.com/heliufang" title="github"><i class="icon iconfont icon-github"></i></a> <a target="_blank" rel="noopener" href="https://gitee.com/heliufang" title="gitee"><i class="icon iconfont icon-gitee"></i></a> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/helf" title="博客园"><i class="icon iconfont icon-cnblogs"></i></a></div><div class="other"><div class="item"><a class="title" style="color:#ff5722" href="/"><p class="num">64</p><div>文章</div></a></div><div class="item"><a style="color:#009688" href="/categories"><div class="num">10</div><div class="title">分类</div></a></div><div class="item"><a class="title" style="color:#01aaed" href="/tags"><div class="num">61</div><div>标签</div></a></div></div></div></div></div><div class="layui-card ahover"><div class="layui-card-header"><i style="font-weight:700" class="layui-icon layui-icon-website"></i> 网站资讯</div><div class="layui-card-body"><div class="webInfo-item"><div class="title">本站文章字数合计</div><div class="content">243.7k</div></div><div class="webInfo-item"><div class="title">本站Hexo版本</div><div class="content">6.1.0</div></div><div class="webInfo-item"><div class="title">本站Node版本</div><div class="content">16.14.2</div></div><div class="webInfo-item"><div class="title">本站已运行时间</div><div class="content"><span id="runDays" data-since-date="2020-12-24"><i class="layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop"></i></span>天</div></div><div class="webInfo-item"><div class="title">最后更新时间</div><div class="content" id="lastUpdate" data-last-update="2024-09-17 22:37:24"><i class="layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop"></i></div></div></div></div><div class="layui-card ahover"><div class="layui-card-header"><i style="font-weight:700" class="layui-icon layui-icon-time"></i> 最新文章</div><div class="layui-card-body"><ul><li><a href="/posts/81efbd4e/">1.Python面向对象笔记</a></li><li><a href="/posts/3d8035a5/">2.Python基础笔记</a></li><li><a href="/posts/8898569d/">3.基于nodejs的http-server搭建静态资源服务</a></li><li><a href="/posts/9183fda2/">4.springboot整合websocket</a></li><li><a href="/posts/134dc9cc/">5.jquery封装echart插件</a></li></ul></div></div><div class="layui-card ahover"><div class="layui-card-header"><i style="font-weight:700" class="layui-icon layui-icon-template-1"></i> 文章分类</div><div class="layui-card-body left-a-color"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../../categories/docker/">docker</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="../../categories/git/">git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="../../categories/java/">java</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="../../categories/linux/">linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="../../categories/python/">python</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="../../categories/vue/">vue</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="../../categories/web%E5%89%8D%E7%AB%AF/">web前端</a><span class="category-list-count">31</span></li><li class="category-list-item"><a class="category-list-link" href="../../categories/%E5%85%AC%E4%BC%97%E5%8F%B7%E5%92%8C%E5%B0%8F%E7%A8%8B%E5%BA%8F/">公众号和小程序</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="../../categories/%E5%85%B6%E5%AE%83%E6%8A%80%E6%9C%AF/">其它技术</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="../../categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="category-list-count">2</span></li></ul></div></div><div style="height:calc(100% - 60px - 60px);width:267px" id="toc-area" class="layui-card ahover"><div class="layui-card-header"><i class="layui-icon layui-icon-align-center"></i> 本文目录</div><div id="tocMain" class="layui-card-body" style="overflow:auto;height:calc(100% - 60px - 60px)"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-text">创建项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1"><span class="toc-text">路由</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-text">静态路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-text">动态路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NuxtLink%E7%BB%84%E4%BB%B6"><span class="toc-text">NuxtLink组件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%83%E5%B1%80"><span class="toc-text">布局</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2"><span class="toc-text">错误页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">中间件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">路由中间件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E5%90%8D%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">命名中间件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96"><span class="toc-text">数据获取</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#asyncData"><span class="toc-text">asyncData</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mouted"><span class="toc-text">mouted</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90sass"><span class="toc-text">集成sass</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90elementui"><span class="toc-text">集成elementui</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-text">国际化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E8%A8%80%E5%88%87%E6%8D%A2%E7%BB%84%E4%BB%B6"><span class="toc-text">语言切换组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#element-ui-%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-text">element ui 国际化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SEO%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-text">SEO的处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%A4%84%E7%90%86"><span class="toc-text">全局处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E4%B8%AA%E9%A1%B5%E9%9D%A2%E6%88%96%E8%80%85%E5%B8%83%E5%B1%80%E7%BB%84%E4%BB%B6%E4%B8%AD%E9%85%8D%E7%BD%AE"><span class="toc-text">单个页面或者布局组件中配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vuex%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">vuex的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-text">配置环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90axios"><span class="toc-text">集成axios</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%BB%84%E4%BB%B6%E8%87%AA%E5%8A%A8%E5%AF%BC%E5%85%A5"><span class="toc-text">配置组件自动导入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEip%E5%92%8C%E7%AB%AF%E5%8F%A3"><span class="toc-text">配置ip和端口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEsrc%E7%9B%AE%E5%BD%95"><span class="toc-text">配置src目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#svg%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85"><span class="toc-text">svg组件封装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%BC%95%E5%85%A5"><span class="toc-text">静态资源引入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E6%88%90tailwindcss"><span class="toc-text">集成tailwindcss</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nuxt2%E9%A1%B9%E7%9B%AE%E6%A8%A1%E6%9D%BF"><span class="toc-text">nuxt2项目模板</span></a></li></ol></div><div class="readprocess"><div><i class="layui-icon layui-icon-read"></i> 已阅读：<span id="progressTxt"></span>%</div><div class="layui-progress" lay-filter="demo"><div class="layui-progress-bar" lay-percent="10%"></div></div></div></div></div><div class="layui-col-md9 markdown-body" style="background:#fff;margin-top:10px"><div class="article-title"><p><span><i class="layui-icon layui-icon-template-1"></i> 分类: <span class="layui-badge layui-bg-cyan">web前端</span> </span>| <span><i class="layui-icon layui-icon-note"></i> 标签: <span class="layui-badge layui-bg-black">nuxt</span></span></p><h1>nuxt2笔记整理</h1><p><span><i class="layui-icon layui-icon-survey"></i> 发表于: 2023-12-12 17:44:28 </span>| <span><i class="layui-icon layui-icon-app"></i> 字数统计: 4.8k </span>| <span><i class="layui-icon layui-icon-log"></i> 阅读时长预计: 23分钟</span></p></div><div id="article"><p><a target="_blank" rel="noopener" href="https://v2.nuxt.com/docs/get-started/installation">Nuxt2官网</a></p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>nuxt是基于vue语法来实现SSR(服务器渲染)的框架，解决单页应用不利于SEO的问题</p><h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p>由于国内网络问题经常下载失败，推荐采用沙盒下载环境项目模板</p><p><a target="_blank" rel="noopener" href="https://stackblitz.com/github/nuxt/starter/tree/v2-stackblitz?file=README.md">https://stackblitz.com/github/nuxt/starter/tree/v2-stackblitz?file=README.md</a></p><p><img src="/posts/8088d2b5/1702344800164.png" alt="1702344800164"></p><p>新建一个nuxt2-study文件夹，将下载后的文件解压到这个文件夹中</p><p><img src="/posts/8088d2b5/1702345551102.png" alt="1702345551102"></p><p>然后安装依赖</p><pre><code class="shell">npm i
</code></pre><p>启动</p><pre><code class="shell">npm run dev
</code></pre><p>访问：localhost:3000</p><h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>每个页面组件都是一个Vue组件 ，pages目录中的每个文件都是一个页面。</p><h3 id="静态路由"><a href="#静态路由" class="headerlink" title="静态路由"></a>静态路由</h3><p>假设文件结构如下</p><pre><code>pages/
--| user/
-----| index.vue
-----| one.vue
--| index.vue
</code></pre><p>那么生成的路由如下</p><pre><code class="js">router: &#123;
  routes: [
    &#123;
      name: &#39;index&#39;,
      path: &#39;/&#39;,
      component: &#39;pages/index.vue&#39;
    &#125;,
    &#123;
      name: &#39;user&#39;,
      path: &#39;/user&#39;,
      component: &#39;pages/user/index.vue&#39;
    &#125;,
    &#123;
      name: &#39;user-one&#39;,
      path: &#39;/user/one&#39;,
      component: &#39;pages/user/one.vue&#39;
    &#125;
  ]
&#125;
</code></pre><h3 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h3><p>假设文件结构如下</p><pre><code>pages/
--| _slug/
-----| comments.vue
-----| index.vue
--| users/
-----| _id.vue
--| index.vue
</code></pre><p>那么生成的路由如下</p><pre><code class="js">router: &#123;
  routes: [
    &#123;
      name: &#39;index&#39;,
      path: &#39;/&#39;,
      component: &#39;pages/index.vue&#39;
    &#125;,
    &#123;
      name: &#39;users-id&#39;,
      path: &#39;/users/:id?&#39;,
      component: &#39;pages/users/_id.vue&#39;
    &#125;,
    &#123;
      name: &#39;slug&#39;,
      path: &#39;/:slug&#39;,
      component: &#39;pages/_slug/index.vue&#39;
    &#125;,
    &#123;
      name: &#39;slug-comments&#39;,
      path: &#39;/:slug/comments&#39;,
      component: &#39;pages/_slug/comments.vue&#39;
    &#125;
  ]
&#125;
</code></pre><p>动态路由参数的获取和<code>vue-router</code>一致：<code>this.$route.params.xxx</code></p><h3 id="NuxtLink组件"><a href="#NuxtLink组件" class="headerlink" title="NuxtLink组件"></a>NuxtLink组件</h3><p>和router-link类似，用于跳转页面。 对于指向站点内页面的所有链接，请使用&lt; NuxtLink &gt;。如果有其他网站的链接，应该使用&lt; a &gt;标签</p><pre><code class="html">&lt;NuxtLink to=&quot;/book/10001&quot;&gt;查看详情&lt;/NuxtLink&gt;
</code></pre><h2 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h2><p>功能类似vue中的router-view组件，一个项目可以有多个布局。默认使用的布局是 layouts&#x2F;default.vue</p><ul><li>定义新布局 layouts&#x2F;myLayout.vue</li></ul><pre><code class="html">&lt;template&gt;
    &lt;div&gt;
        &lt;h1&gt;自定义页面头部&lt;/h1&gt;
        &lt;!-- Nuxt功能类似router-view组件 --&gt;
        &lt;Nuxt /&gt;
        &lt;h1&gt;自定义页面底部&lt;/h1&gt;
    &lt;/div&gt;
&lt;/template&gt;
</code></pre><ul><li>组件中使用布局</li></ul><pre><code class="html">&lt;template&gt;
    &lt;div&gt;
        &lt;NuxtLink to=&quot;/book/10001&quot;&gt;查看详情&lt;/NuxtLink&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
    name: &#39;Nuxt2StudyIndex&#39;,
    layout: &#39;myLayout&#39;,//使用自定义的布局
    //...
&#125;;
&lt;/script&gt;
</code></pre><h2 id="错误页面"><a href="#错误页面" class="headerlink" title="错误页面"></a>错误页面</h2><p>当404和500的时候显示一个错误页面</p><p>layouts&#x2F;error.vue</p><pre><code class="html">&lt;template&gt;
    &lt;!-- 自定义错误页面 --&gt;
    &lt;div class=&quot;error-container&quot;&gt;
        &lt;div class=&quot;info&quot;&gt;
            &lt;div class=&quot;code&quot;&gt;&#123;&#123; error.statusCode &#125;&#125;&lt;/div&gt;
            &lt;div v-if=&quot;error.statusCode == 404&quot; class=&quot;desc&quot;&gt;抱歉！页面走丢了&lt;/div&gt;
            &lt;div v-else class=&quot;desc&quot;&gt;抱歉！服务器繁忙&lt;/div&gt;
            &lt;el-button @click=&quot;$router.replace(&#39;/home&#39;)&quot;&gt;返回首页&lt;/el-button&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;
  
&lt;script&gt;
export default &#123;
    props: [&#39;error&#39;]
&#125;
&lt;/script&gt;
&lt;style lang=&quot;scss&quot; scoped&gt;
.error-container &#123;
    background-color: #55aafe;
    height: 100vh;
    display: flex;
    .info &#123;
        margin: auto;
        color: #fff;
        text-align: center;
        .code &#123;
            font-size: 200px;
            font-weight: bold;
        &#125;
        .desc&#123;
            font-size: 30px;
            margin: 20px 0;
        &#125;
    &#125;
&#125;
&lt;/style&gt;
</code></pre><h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p>生命周期如下: 重点掌握asyncData() 和 mouted()</p><p><img src="/posts/8088d2b5/lifecycle.png" alt="lifecycle"></p><h2 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a>中间件</h2><p>在请求到达之前做一些处理、比如重定向、鉴权等操作</p><h3 id="路由中间件"><a href="#路由中间件" class="headerlink" title="路由中间件"></a>路由中间件</h3><p>新建 middleware&#x2F;middleware.js</p><pre><code class="js">export default function (&#123;app,redirect,route &#125;) &#123;
    console.log(&#39;这个会在服务器的控制台打印&#39;)
    //默认跳转到 home
    if(&quot;/&quot; == route.fullPath || &quot;/zh&quot; == route.fullPath)&#123;
        redirect(&#39;/home&#39;)
    &#125;
&#125;
</code></pre><p>nuxt.config.js 配置中间件</p><pre><code class="js">export default &#123;
    router: &#123;
        middleware: &quot;middleware&quot;, //middleware对应middleware.js的文件名
    &#125;
    //...
&#125;
</code></pre><h3 id="命名中间件"><a href="#命名中间件" class="headerlink" title="命名中间件"></a>命名中间件</h3><p>新建middleware&#x2F;auth.js</p><pre><code class="js">//鉴权中间件
export default function (&#123; app,store, redirect, route &#125;) &#123;
  console.log(&quot;auth middleware&quot;, store.getters.token, &quot;auth url&quot;, route.path);

  //白名单
  let whiteList = [
    &quot;/sign-in&quot;, 
    &#39;/register&#39;,
    &#39;/home&#39;
  ];
  //let whiteListZh = whiteList.map(m =&gt; app.localePath(m))
  //whiteList = [...whiteList,...whiteListZh] //生成中英

  if (process.client &amp;&amp; !store.getters.token) &#123;//客户端渲染的页面 没有token
    if (!(whiteList.includes(route.path) || whiteList.some(s =&gt; route.path.startsWith(s)))) &#123;//不在白名单
       return redirect(&quot;/sign-in&quot;);//跳转登录
      //return redirect(app.localePath(&quot;/sign-in&quot;));//跳转登录
    &#125;
  &#125;
&#125;
</code></pre><p>在页面组件或者布局组件中</p><pre><code class="html">&lt;template&gt;

&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &#39;MyLayout&#39;,
  middleware: [&#39;auth&#39;] //当前组件将要受到auth中间件控制
&#125;
&lt;/script&gt;

&lt;style lang=&quot;scss&quot; scoped&gt;
&lt;/style&gt;
</code></pre><h2 id="数据获取"><a href="#数据获取" class="headerlink" title="数据获取"></a>数据获取</h2><h3 id="asyncData"><a href="#asyncData" class="headerlink" title="asyncData"></a>asyncData</h3><p>asyncData只能用于页面级组件，asyncData不能访问组件实例(this)。它接收上下文作为其参数。Nuxt会自动将返回的对象与组件数据进行浅层合并。</p><pre><code class="html">&lt;template&gt;
    &lt;div&gt;
        &lt;ul&gt;
            &lt;li v-for=&quot;car in carList&quot;&gt;&#123;&#123; car.id + '-' + car.name &#125;&#125;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
    name: &#39;Nuxt2StudyIndex&#39;,
    data() &#123;
        return &#123;
            carList: []
        &#125;;
    &#125;,
    //服务端渲染：服务器请求并渲染数据 这个钩子内部不能使用this
    async asyncData(ctx) &#123;
         //query 等价于 this.$route.query  params 等价于 this.$route.params
        console.log(&#39;ctx&#39;, ctx.query,ctx.params)
        //模拟发送请求
        let carList = await new Promise((resolve, reject) =&gt; &#123;
            setTimeout(() =&gt; &#123;
                resolve([
                    &#123; id: 1, name: &#39;宝马&#39; &#125;,
                    &#123; id: 2, name: &#39;奔驰&#39; &#125;,
                    &#123; id: 3, name: &#39;五菱&#39; &#125;,
                ])
            &#125;, 1000);
        &#125;)
        return &#123; carList &#125; //这个数据将自动合并到组件data()
    &#125;
&#125;;
&lt;/script&gt;
</code></pre><h3 id="mouted"><a href="#mouted" class="headerlink" title="mouted"></a>mouted</h3><p>用于客户端渲染,和vue中的一致</p><pre><code class="html">&lt;template&gt;
    &lt;div&gt;
        &lt;ul&gt;
            &lt;li v-for=&quot;car in carList&quot;&gt;&#123;&#123; car.id + '-' + car.name &#125;&#125;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
    name: &#39;Nuxt2StudyIndex&#39;,

    data() &#123;
        return &#123;
            carList: []
        &#125;;
    &#125;,

    //客户端渲染
    mounted() &#123;
        let cartList = [
            &#123;id: 1,name: &#39;宝马&#39;&#125;,
            &#123;id: 2,name: &#39;奔驰&#39;&#125;,
            &#123;id: 3,name: &#39;五菱&#39;&#125;,
        ] 
        this.carList = cartList
    &#125;
&#125;;
&lt;/script&gt;
</code></pre><h2 id="集成sass"><a href="#集成sass" class="headerlink" title="集成sass"></a>集成sass</h2><p>安装</p><pre><code class="shell">npm i sass@1.32.13
npm i sass-loader@10.1.1
</code></pre><p>页面使用</p><pre><code class="html">&lt;template&gt;
  &lt;div class=&quot;container&quot;&gt;
    &lt;h1&gt;hello nuxt2&lt;/h1&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;style lang=&quot;scss&quot; scoped&gt;
.container&#123;
  h1&#123;
    color: red;
  &#125;
&#125;
&lt;/style&gt;
</code></pre><h2 id="集成elementui"><a href="#集成elementui" class="headerlink" title="集成elementui"></a>集成elementui</h2><p>安装</p><pre><code class="shell">npm i element-ui -S
</code></pre><p>新建plugins&#x2F;elementui.js</p><pre><code class="js">import Vue from &#39;vue&#39;;
import ElementUI from &#39;element-ui&#39;;
Vue.use(ElementUI);
</code></pre><p>nuxt.config.js引入elementui.js插件和样式</p><pre><code class="js">export default &#123;
    css: [
        &quot;element-ui/lib/theme-chalk/index.css&quot;,
        &#39;element-ui/lib/theme-chalk/display.css&#39;
      ],
    plugins: [
        &quot;~/plugins/elementui.js&quot;,
    ],
    //...
&#125;
</code></pre><p>页面使用</p><pre><code class="html">&lt;template&gt;
  &lt;div class=&quot;container&quot;&gt;
    &lt;el-button type=&quot;primary&quot;&gt;test&lt;/el-button&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre><h2 id="国际化"><a href="#国际化" class="headerlink" title="国际化"></a>国际化</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><p>安装</p><pre><code class="shell">npm i @nuxtjs/i18n@7.3.1
</code></pre><p>项目根目录新建lang&#x2F;zh.js</p><pre><code class="js">export default &#123;
    name: &#39;姓名&#39;,
    age: &#39;年龄&#39;
&#125;
</code></pre><p>项目根目录新建lang&#x2F;en.js</p><pre><code class="js">export default &#123;
    name: &#39;name&#39;,
    age: &#39;age&#39;
&#125;
</code></pre><p>项目根目录新建i18n.js</p><pre><code class="js">import en from &quot;./lang/en.js&quot;;
import zh from &quot;./lang/zh.js&quot;;
import Vue from &quot;vue&quot;;
import VueI18n from &quot;vue-i18n&quot;;
Vue.use(VueI18n);

const i18n = &#123;
  locales: [&quot;en&quot;, &quot;zh&quot;], //有多少地区的语言就添加多少种
  defaultLocale: &quot;en&quot;, //默认的地区语言
  vueI18n: &#123;
    fallbackLocale: &quot;en&quot;, //回退策略，指定的locale中没有找到对应资源的情况下使用的locale
    messages: &#123;
      //要渲染的信息，有多少语言就添加多少种
      en,
      zh,
    &#125;
  &#125;,
&#125;
</code></pre><p>nuxt.config.js</p><pre><code class="js">import i18n from &quot;./i18n.js&quot;; //导入上面的i18n配置文件
export default &#123;
    //模块
  modules: [[&quot;@nuxtjs/i18n&quot;, i18n]],
    //...
&#125;
</code></pre><p>页面中使用</p><p>this.$t(‘key’) 获取当前语言下对应的value值</p><p>this.localePath(url) 根据语言处理路径</p><p>this.$i18n.locale 获取当前语言</p><pre><code class="html">&lt;template&gt;
  &lt;div class=&quot;container&quot;&gt;
    &lt;el-tag type=&quot;primary&quot;&gt;&#123;&#123; $t('name') &#125;&#125;&lt;/el-tag&gt;
    &lt;el-tag type=&quot;success&quot;&gt;&#123;&#123; $t('age') &#125;&#125;&lt;/el-tag&gt;
    &lt;nuxt-link :to=&quot;url&quot;&gt;本地化路径&lt;/nuxt-link&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
  name: &#39;Nuxt2StudyIndex&#39;,
  data() &#123;
    return &#123;
      url: &#39;&#39;
    &#125;;
  &#125;,
  mounted() &#123;
    //localePath方法可根据语言处理路径 英文：/book/1001 中文：/zh/book/1001
    this.url = this.localePath(&#39;/book/1001&#39;)
  &#125;
&#125;;
&lt;/script&gt;
</code></pre><p>访问</p><pre><code>英文：http://localhost:3000/
中文：http://localhost:3000/zh
</code></pre><h3 id="语言切换组件"><a href="#语言切换组件" class="headerlink" title="语言切换组件"></a>语言切换组件</h3><p>components&#x2F;Language.vue</p><pre><code class="html">&lt;template&gt;
    &lt;a :href=&quot;webUrl&quot;&gt;
        &lt;img :src=&quot;require(&#39;@/assets/images/zh.svg&#39;)&quot; v-if=&quot;$i18n.locale == &#39;en&#39;&quot; @click.prevent=&quot;changeLang(&#39;zh&#39;)&quot;
            style=&quot;cursor: pointer&quot; /&gt;
        &lt;img :src=&quot;require(&#39;@/assets/images/en.svg&#39;)&quot; v-if=&quot;$i18n.locale == &#39;zh&#39;&quot; @click.prevent=&quot;changeLang(&#39;en&#39;)&quot;
            style=&quot;cursor: pointer&quot; /&gt;
    &lt;/a&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
    name: &#39;Language&#39;,

    data() &#123;
        return &#123;
        &#125;
    &#125;,

    computed: &#123;
        webUrl() &#123;
            return this.$i18n.locale == &#39;en&#39; ? &quot;/zh&quot; + this.$route.fullPath : this.$route.fullPath
        &#125;
    &#125;,

    methods: &#123;
        // 切换语言
        changeLang(lang) &#123;
            let url = this.$route.fullPath
            url = url.includes(&#39;/zh&#39;) ? url.replace(&#39;/zh&#39;, &#39;&#39;) : &#39;/zh&#39; + url
            url = url.replace(&#39;null&#39;, &#39;&#39;)
            // location.href = url
            this.$router.replace(url)
        &#125;
    &#125;,
&#125;;
&lt;/script&gt;

&lt;style lang=&quot;scss&quot; scoped&gt;
a:hover&#123;
    background: #f2f4f7;
&#125;
a&#123;
    padding: 8px!important;
&#125;
img &#123;
    vertical-align: middle;
&#125;
&lt;/style&gt;
</code></pre><h3 id="element-ui-国际化"><a href="#element-ui-国际化" class="headerlink" title="element ui 国际化"></a>element ui 国际化</h3><p>layouts&#x2F;default.vue</p><pre><code class="html">&lt;template&gt;
  &lt;!-- 默认布局组件 --&gt;
  &lt;div&gt;
    &lt;!-- 渲染内容 --&gt;
    &lt;Nuxt /&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import en from &#39;element-ui/lib/locale/lang/en&#39;
import zh from &#39;element-ui/lib/locale/lang/zh-CN&#39;
import locale from &#39;element-ui/lib/locale&#39;
export default &#123;
  name: &#39;Default&#39;,
  mounted() &#123;
    //elementui国际化
    let lang = this.$i18n.locale == &#39;en&#39;? en :zh
    locale.use(lang)
  &#125;
&#125;;
&lt;/script&gt;
</code></pre><h2 id="SEO的处理"><a href="#SEO的处理" class="headerlink" title="SEO的处理"></a>SEO的处理</h2><h3 id="全局处理"><a href="#全局处理" class="headerlink" title="全局处理"></a>全局处理</h3><p>在nuxt.config.js 中可以给所有页面配置</p><pre><code class="js">export default &#123;
  //全局SEO设置
  head: &#123;
    title: &quot;Tranalysis system&quot;,
    htmlAttrs: &#123;
      lang: &quot;en&quot;,
    &#125;,
    meta: [
      &#123; charset: &quot;utf-8&quot; &#125;,
      &#123; name: &quot;viewport&quot;, content: &quot;width=device-width, initial-scale=1&quot; &#125;,
      &#123; hid: &quot;description&quot;, name: &quot;description&quot;, content: &quot;Tranalysis system&quot; &#125;,
    ],
    link: [&#123; rel: &quot;icon&quot;, type: &quot;image/x-icon&quot;, href: &quot;/favicon.ico&quot; &#125;],
  &#125;,
&#125;
</code></pre><h3 id="单个页面或者布局组件中配置"><a href="#单个页面或者布局组件中配置" class="headerlink" title="单个页面或者布局组件中配置"></a>单个页面或者布局组件中配置</h3><p>这种方式更好，可以支持国际化</p><pre><code class="html">&lt;template&gt;&lt;/template&gt;
&lt;script&gt;
export default &#123;
    head() &#123;
        let title = &#39;标题111&#39;
        let description = &#39;描述2222&#39;
        return &#123;
          title,//网页标题
          meta: [
            &#123;
              hid: &#39;keywords&#39;,
              name: &#39;keywords&#39;, //网页关键字
              content: title
            &#125;,
            &#123;
              hid: &#39;description&#39;,
              name: &#39;description&#39;,//网页描述
              content: description
            &#125;,
          ]
        &#125;
    &#125;,
&#125;
&lt;/script&gt;
&lt;style lang=&quot;scss&quot; scoped&gt;&lt;/style&gt;
</code></pre><h2 id="vuex的使用"><a href="#vuex的使用" class="headerlink" title="vuex的使用"></a>vuex的使用</h2><p>和原来的用法一致，nuxt中已经内置vuex，所以不需要安装vuex，只需要安装vuex持久化插件即可</p><p>安装vuex持久化插件</p><pre><code class="shell">npm i vuex-persistedstate@4.1.0
</code></pre><p>新建 plugins&#x2F;vuex-persistedstate.js</p><pre><code class="js">import createPersistedState from &#39;vuex-persistedstate&#39;

//vuex持久化
export default (&#123; store &#125;) =&gt; &#123;
    createPersistedState(&#123;
        storage: localStorage
    &#125;)(store)
&#125;
</code></pre><p>nuxt.config.js</p><pre><code class="js">export default &#123;
  plugins: [
    //...
    &#123; src: &#39;~/plugins/vuex-persistedstate.js&#39;, ssr: false &#125; //引入vuex-persistedstate插件
  ],
&#125;
</code></pre><p>store&#x2F;modules&#x2F;user.js</p><pre><code class="js">const user = &#123;
    state: &#123;
        count: 0
    &#125;,
    mutations: &#123;
        SET_COUNT: (state, data) =&gt; &#123;
          state.count = data
        &#125;,
    &#125;,
    actions: &#123;&#125;
&#125;
export default user;
</code></pre><p>store&#x2F;getters.js</p><pre><code class="js">const getters = &#123;
    count: state =&gt; state.user.count
&#125;

export default getters
</code></pre><p>store&#x2F;index.js</p><pre><code class="js">import Vue from &quot;vue&quot;;
import Vuex from &quot;vuex&quot;;
import user from &quot;./modules/user&quot;;
import getters from &quot;./getters&quot;;
Vue.use(Vuex);
//主要这里要用箭头函数的形式导出，否则会报错
export default () =&gt; new Vuex.Store(&#123;
  getters,
  modules: &#123;
    user
  &#125;,
&#125;);
</code></pre><p>组件中使用vuex</p><pre><code class="html">&lt;template&gt;
    &lt;div&gt;
        &lt;el-button @click=&quot;add&quot; type=&quot;primary&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/el-button&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import &#123;mapGetters,mapMutations&#125; from &#39;vuex&#39;
export default &#123;
    name: &#39;Nuxt2StudyIndex&#39;,
    computed:&#123;
        ...mapGetters([&#39;count&#39;])
    &#125;,
    methods: &#123;
        ...mapMutations([&#39;SET_COUNT&#39;]),
        add()&#123;
            this.SET_COUNT(this.count+1)
        &#125;
    &#125;,
&#125;
&lt;/script&gt;
</code></pre><h2 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h2><p>安装</p><pre><code class="shell">npm i cross-env@7.0.3 -D
</code></pre><p>项目根目录新建env.js</p><pre><code class="js">export default &#123;
    //开发环境
    dev:&#123;
      NODE_ENV: &#39;dev&#39;,
      PROJECT_TITLE: &#39;NUXT-DEV&#39;,
      ENV_API:&#39;http://dev.com/api&#39;,//API地址
    &#125;,
    //测试环境
    stage:&#123;
      NODE_ENV: &#39;test&#39;,
      PROJECT_TITLE: &#39;NUXT-TEST&#39;,
      ENV_API:&#39;http://test.com/api&#39;,//API地址
    &#125;,
    //正式环境
    prod:&#123;
      NODE_ENV: &#39;prod&#39;,
      PROJECT_TITLE: &#39;NUXT-PRODUCTION&#39;,
      ENV_API:&#39;http://prod.com/api&#39;,//API地址
    &#125;
&#125;
</code></pre><p>nuxt.config.js</p><pre><code class="js">import env from &quot;./env.js&quot;; //导入上面的环境变量
export default &#123;
    env: env[process.env.NODE_ENV] //配置环境变量
    //...
&#125;
</code></pre><p>package.json 配置</p><pre><code class="js">&#123;
  &quot;scripts&quot;: &#123;
    &quot;dev&quot;: &quot;cross-env NODE_ENV=dev nuxt dev&quot;,
    &quot;build:stage&quot;: &quot;cross-env NODE_ENV=stage nuxt build&quot;,
    &quot;start:stage&quot;: &quot;cross-env NODE_ENV=stage nuxt start&quot;,
    &quot;build:prod&quot;: &quot;cross-env NODE_ENV=prod nuxt build&quot;,
    &quot;start:prod&quot;: &quot;cross-env NODE_ENV=prod nuxt start&quot;,
    &quot;generate:prod&quot;: &quot;cross-env NODE_ENV=prod nuxt generate&quot;,
    &quot;generate:stage&quot;: &quot;cross-env NODE_ENV=stage nuxt generate&quot;
  &#125;,
&#125;
</code></pre><p>页面中使用</p><pre><code class="html">&lt;template&gt;
    &lt;div&gt;
        &#123;&#123; title &#125;&#125;-&#123;&#123; baseAPI &#125;&#125;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default &#123;
    name: &#39;Nuxt2StudyIndex&#39;,
    data() &#123;
        return &#123;
            title: process.env.PROJECT_TITLE,
            baseAPI: process.env.ENV_API
        &#125;
    &#125;
&#125;
</code></pre><h2 id="集成axios"><a href="#集成axios" class="headerlink" title="集成axios"></a>集成axios</h2><p>安装</p><pre><code class="shell">npm i @nuxtjs/axios@5.13.6
</code></pre><p>plugins&#x2F;axios.js 参考下面按需修改即可</p><pre><code class="js">import &#123; Message &#125; from &quot;element-ui&quot;;
import &#123; getToken &#125; from &quot;@/utils/auth&quot;;
//get请求参数处理
function tansParams(params) &#123;
  let result = &quot;&quot;;
  for (const propName of Object.keys(params)) &#123;
    const value = params[propName];
    var part = encodeURIComponent(propName) + &quot;=&quot;;
    if (value !== null &amp;&amp; value !== &quot;&quot; &amp;&amp; typeof value !== &quot;undefined&quot;) &#123;
      if (typeof value === &quot;object&quot;) &#123;
        for (const key of Object.keys(value)) &#123;
          if (
            value[key] !== null &amp;&amp;
            value[key] !== &quot;&quot; &amp;&amp;
            typeof value[key] !== &quot;undefined&quot;
          ) &#123;
            let params = propName + &quot;[&quot; + key + &quot;]&quot;;
            var subPart = encodeURIComponent(params) + &quot;=&quot;;
            result += subPart + encodeURIComponent(value[key]) + &quot;&amp;&quot;;
          &#125;
        &#125;
      &#125; else &#123;
        result += part + encodeURIComponent(value) + &quot;&amp;&quot;;
      &#125;
    &#125;
  &#125;
  return result;
&#125;
export default function (&#123; $axios, redirect, app, store, $router, $route &#125;) &#123;
  //如果需要国际化可以：app.i18n.t(&quot;key&quot;)

  //请求拦截
  $axios.interceptors.request.use(
    (config) =&gt; &#123;
      const isToken = (config.headers || &#123;&#125;).isToken === false;
      if (getToken() &amp;&amp; !isToken) &#123;
        config.headers[&quot;Authorization&quot;] = &quot;Bearer &quot; + getToken(); // 让每个请求携带自定义token 请根据实际情况自行修改
      &#125;
      // get请求映射params参数
      if (config.method === &quot;get&quot; &amp;&amp; config.params) &#123;
        let url = config.url + &quot;?&quot; + tansParams(config.params);
        url = url.slice(0, -1);
        config.params = &#123;&#125;;
        config.url = url;
      &#125;
      return config;
    &#125;,
    (error) =&gt; &#123;
      console.log(&quot;axios request error&quot;, error);
      return Promise.reject(error);
    &#125;
  );
  //响应拦截
  $axios.interceptors.response.use(
    (response) =&gt; &#123;
      const code = response.data.code || 200;
      console.log(&quot;code&quot;, code, &quot;axios response:&quot; + response);
      const res = response.data;
      //文件下载
      if (&quot;business/product/downloadProductData&quot; == response.config.url) &#123;
        return res;
      &#125;
      if (code === 401) &#123;
        //登录过期
        // if(app.i18n.t(res.msg)) Message(&#123;type: &#39;error&#39;, message: app.i18n.t(res.msg)&#125;)
        // store.dispatch(&quot;LogOut&quot;).then(() =&gt; &#123;
        //   app.router.push(app.localePath(&quot;/&quot;));
        // &#125;);
        Message(&#123; type: &quot;error&quot;, message: &quot;登录已过期，请重新登录！&quot; &#125;);
        app.router.push(app.localePath(&quot;/&quot;));
      &#125; else if (code === 200) &#123;
        //普通请求
        return res;
      &#125; else if (code === 500) &#123;
        Message(&#123; type: &quot;error&quot;, message: app.i18n.t(res?.msg) &#125;);
        return Promise.reject(new Error(res?.msg || &quot;Error&quot;));
      &#125; else &#123;
        return res;
      &#125;
    &#125;,
    (error) =&gt; &#123;
      console.log(&quot;err&quot; + error);
      let &#123; message &#125; = error;
      Message(&#123; message, type: &quot;error&quot;, duration: 5 * 1000 &#125;);
      return Promise.reject(error);
    &#125;
  );
&#125;
</code></pre><p>plugins&#x2F;api.js</p><pre><code class="js">import login from &#39;@/api/login&#39;
import menu from &#39;@/api/menu&#39;
export default function(&#123; $axios &#125;,inject) &#123;
    inject(&#39;loginAPI&#39;,login($axios)) //组件中使用this.$loginAPI.xxx方法名调用
    inject(&#39;menuAPI&#39;,menu($axios)) //组件中使用this.$menuAPI.xxx方法名调用
&#125;
</code></pre><p>api&#x2F;menu.js</p><pre><code class="js">export default function menu(request) &#123;
  /**
   * 获取菜单
   */
  const getRouters = (lang,menuSuit=1) =&gt; &#123;
    return request(&#123;
      url: `/system/menu/getRouters/$&#123;lang&#125;/$&#123;menuSuit&#125;`,
      method: &quot;get&quot;,
    &#125;);
  &#125;;

  return &#123;
    getRouters,
  &#125;;
&#125;
</code></pre><p>api&#x2F;login.js</p><pre><code class="js">export default function login(request) &#123;
    // 注册方法
      function register(data) &#123;
        return request(&#123;
          url: &quot;/auth/register&quot;,
          headers: &#123;
            isToken: false, //无需携带token
          &#125;,
          method: &quot;post&quot;,
          data: data,
        &#125;);
      &#125;
        // 获取用户详细信息
      function getInfo() &#123;
        return request(&#123;
          url: &quot;/system/user/getInfo&quot;,
          method: &quot;get&quot;,
        &#125;);
      &#125;
    return &#123;
        register,
        getInfo
      &#125;;
&#125;
</code></pre><p>nuxt.config.js 中配置</p><pre><code class="js">export default &#123;
    //第一步：配置axios请求前缀
    axios: &#123;
        // proxyHeaders: false
        baseURL: env[process.env.NODE_ENV].ENV_API 
        //...
    &#125;
    //第二步：增加axios相关的两个配置
    plugins: [
        &quot;~/plugins/axios.js&quot;,
        &quot;~/plugins/api.js&quot;, 
        //...
    ],
    //第三步：模块中增加axios
    modules: [&quot;@nuxtjs/axios&quot;, [&quot;@nuxtjs/i18n&quot;, i18n]],
    //...
&#125;
</code></pre><p>页面中使用</p><pre><code class="js">export default &#123;
    methods: &#123;
        async test()&#123;
          //调用方法：plugins/api.js中的 inject(&#39;loginAPI&#39;,login($axios)) 第一个参数前面+$调用
          const res = await this.$loginAPI.register(&#123;username: &#39;tom&#39;,password: 123456&#125;)
          //await this.$loginAPI.getInfo()
          //this.$menuAPI.getRouters()
        &#125;
    &#125;
&#125;
</code></pre><h2 id="配置组件自动导入"><a href="#配置组件自动导入" class="headerlink" title="配置组件自动导入"></a>配置组件自动导入</h2><p>nuxt.config.js</p><pre><code class="js">export default &#123;
    components: true
    //...
&#125;
</code></pre><h2 id="配置ip和端口"><a href="#配置ip和端口" class="headerlink" title="配置ip和端口"></a>配置ip和端口</h2><p>nuxt.config.js</p><pre><code class="js">export default &#123;
    server: &#123;
        port: 81, // default: 3000
        host: &quot;0.0.0.0&quot;, // default: localhost
    &#125;
    //...
&#125;
</code></pre><h2 id="配置src目录"><a href="#配置src目录" class="headerlink" title="配置src目录"></a>配置src目录</h2><p>默认不使用src目录，如果需要配置像下面这样</p><pre><code class="bash">---| node_modules/
---| nuxt.config.js
---| package.json
---| src/
------| assets/
------| components/
------| layouts/
------| middleware/
------| pages/
------| plugins/
------| static/
------| store/
</code></pre><p>则需要在nuxt.config.js中配置</p><pre><code class="js">export default &#123;
    srcDir: &quot;./src&quot;
    //...
&#125;
</code></pre><h2 id="svg组件封装"><a href="#svg组件封装" class="headerlink" title="svg组件封装"></a>svg组件封装</h2><p>封装svg组件，方便后续svg图片的使用</p><p>首先安装</p><pre><code class="shell">npm i svg-sprite-loader@6.0.11 -D
</code></pre><p>在nuxt.config.js中配置</p><pre><code class="js">const path = require(&#39;path&#39;); //导入path模块
export default &#123;
    build: &#123;
        vendor: [&quot;element-ui&quot;],
        extend(config, ctx) &#123;
          // ...
          const svgRule = config.module.rules.find((rule) =&gt;
            rule.test.test(&quot;.svg&quot;)
          );
          //这里将svg图片拷贝到 》 根目录/static/svg文件夹中
          svgRule.exclude = [path.resolve(__dirname, &quot;./static/svg&quot;)];
          config.module.rules.push(&#123;
            test: /\.svg$/,
            include: [path.resolve(__dirname, &quot;./static/svg&quot;)],
            loader: &quot;svg-sprite-loader&quot;,
            options: &#123;
              symbolId: &quot;icon-[name]&quot;,
            &#125;,
          &#125;);
        &#125;,
    &#125;,
    //...
&#125;
</code></pre><p>新建 components&#x2F;SvgIcon.vue 组件</p><pre><code class="html">&lt;!-- nuxt中使用svg https://blog.csdn.net/qq_26373925/article/details/108405038 --&gt;
&lt;template&gt;
    &lt;svg :class=&quot;svgClass&quot; aria-hidden=&quot;true&quot;&gt;
        &lt;use :xlink:href=&quot;iconName&quot; /&gt;
    &lt;/svg&gt;
&lt;/template&gt;
  
&lt;script&gt;
export default &#123;
    name: &#39;SvgIcon&#39;,
    props: &#123;
        iconClass: &#123;
            type: String,
            required: true
        &#125;,
        className: &#123;
            type: String,
            default: &#39;&#39;
        &#125;
    &#125;,
    computed: &#123;
        iconName() &#123;
            console.log(&#39;iconClass&#39;, this.iconClass)
            return `#icon-$&#123;this.iconClass&#125;`
        &#125;,
        svgClass() &#123;
            return this.className ? &#39;svg-icon &#39; + this.className : &#39;svg-icon&#39;
        &#125;
    &#125;
&#125;
&lt;/script&gt;
  
&lt;style scoped&gt;
.svg-icon &#123;
    width: 1em;
    height: 1em;
    font-size: 1.2em;
    vertical-align: -0.15em;
    fill: currentColor;
    overflow: hidden;
&#125;
&lt;/style&gt;
</code></pre><p>页面中使用</p><pre><code class="html">&lt;template&gt;
    &lt;div&gt;
        &lt;!--dashboard 对应 static/svg/dashboard.svg--&gt;
        &lt;svg-icon icon-class=&quot;dashboard&quot; /&gt; &lt;span slot=&quot;title&quot;&gt;首页&lt;/span&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default &#123;&#125;
&lt;/script&gt;
&lt;style scoped&gt;&lt;/style&gt;
</code></pre><h2 id="静态资源引入"><a href="#静态资源引入" class="headerlink" title="静态资源引入"></a>静态资源引入</h2><p>static目录和assets目录，都是用来存储静态文件的</p><pre><code>assets中的资源会被webpack处理，打包后会在dist中合并成一个文件；static中的资源不会被webpack处理，打包后直接复制到dist（默认是dist/static）下

推荐assets中存放自己的资源（css、images、utils等），static中放第三方资源（pdf.js、iconfont等）

动态绑定中，assets的图片会加载失败，因为webpack使用commonJS规范，需要使用require引入图片（可以通过import的方式引入）
</code></pre><p>assets 需要 require引入</p><pre><code class="html">&lt;!--assets/images/zh.svg--&gt;
&lt;img :src=&quot;require(&#39;@/assets/images/zh.svg&#39;)&quot; /&gt;
</code></pre><p>static直接映射到服务器根目录，可以通过项目根URL访问</p><pre><code class="html">&lt;!--static/images/pay/ali.png--&gt;
&lt;img src=&quot;/images/pay/ali.png&quot; width=&quot;40&quot;&gt;
</code></pre><h2 id="集成tailwindcss"><a href="#集成tailwindcss" class="headerlink" title="集成tailwindcss"></a>集成tailwindcss</h2><p>安装</p><pre><code class="shell">npm i @nuxtjs/tailwindcss@6.10.1
</code></pre><p>项目根目录 创建 tailwind.config.js</p><pre><code class="js">/** @type &#123;import(&#39;tailwindcss&#39;).Config&#125; */
module.exports = &#123;
  content: [],
  theme: &#123;
    extend: &#123;&#125;,
  &#125;,
  plugins: [],
&#125;
</code></pre><p>项目根目录 创建 assets&#x2F;css&#x2F;tailwind.css</p><pre><code class="css">@tailwind base;
@tailwind components;
@tailwind utilities;
</code></pre><p>在nuxt.config.js中配置</p><pre><code class="js">export default &#123;
    buildModules: [&#39;@nuxtjs/tailwindcss&#39;],
    tailwindcss: &#123;
        cssPath: &#39;~/assets/css/tailwind.css&#39;,
        configPath: &#39;tailwind.config.js&#39;,
        exposeConfig: false,
        config: &#123;&#125;
    &#125;,
    //...
&#125;
</code></pre><h2 id="nuxt2项目模板"><a href="#nuxt2项目模板" class="headerlink" title="nuxt2项目模板"></a>nuxt2项目模板</h2><p>自建nuxt2项目模板 <a target="_blank" rel="noopener" href="https://gitee.com/heliufang/nuxt2-template">nuxt2-template</a></p></div><div class="post-ending"><div class="end-txt">------ 本文结束，感谢您的阅读 ------</div><blockquote class="layui-elem-quote layui-quote-nm" style="padding:10px"><div><span class="title">本文作者: </span>贺刘芳</div><div><span class="title">本文链接: </span><a target="_blank" href="https://heliufang.github.io/posts/8088d2b5/">https://heliufang.github.io/posts/8088d2b5/</a></div><div><span class="title">版权声明: </span>本文采用知识共享署名-非商业性使用-禁止演绎 2.5 中国大陆许可协议进行许可。</div></blockquote><div id="vcomments"></div></div></div></div></div><ul id="toTopBtn" class="layui-fixbar" style="right:-70px" title="置顶"><div><a href="javascript:void(0)" class="icon iconfont icon-huojian"></a></div></ul><div class="qy-footer"><div class="font-Area"><p>访客数 <span style="color:red" id="busuanzi_value_site_uv"><i class="layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop"></i></span> 人次 | 访问量 <span style="color:red" id="busuanzi_value_site_pv"><i class="layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop"></i></span> 次 | 本站已运行 <span style="color:red" id="runDaysFooter"><i class="layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop"></i></span> 天 | 本站文章字数合计 <span style="color:red">243.7k</span> | 最后更新于 <span style="color:red" id="lastUpdateFooter"><i class="layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop"></i></span></p><p>由 <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a> <span style="color:red" class="layui-icon layui-icon-find-fill layui-anim layui-anim-rotate layui-anim-loop"></span> 强力驱动 v6.1.0</p><p>Copyright © 2020 ~<span id="currentYear">2022</span> <span class="layui-icon layui-icon-heart-fill footer-heart"></span> HeLiuFang</p></div></div></body><script src="../../js/jquery.min.js"></script><script src="../../js/moment.min.js"></script><script src="../../layui/layui.js"></script><script src="../../lib/prism/prism.js"></script><script>$("#searchBtn").click(function(){$("#searchShade").show(),$("#searchLayer").addClass("layui-anim layui-anim-scaleSpring")}),$("#closeBtn").click(function(){$("#searchShade").hide()});var searchFunc=function(e,o,a){$.ajax({url:e,dataType:"json",success:function(e){var t=document.getElementById(o),n=document.getElementById(a);t.addEventListener("input",function(){var t='<ul class="search-result-list">',a=this.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="",this.value.trim().length<=0||(e.forEach(function(e){var n=!0,o=e.title.trim().toLowerCase(),e=e.url;""!=o&&a.forEach(function(e,t){o.indexOf(e)<0?n=!1:o=o.replace(new RegExp(e,"g"),'<span style="color:red">'+e+"</span>")}),n&&(t=t+"<li><a href='"+e+"' class='search-result-title'>"+o+"</a></li>")}),t+="</ul>",n.innerHTML=t)})}})};function DynamicLine(){function e(e,t,n){return e.getAttribute(t)||n}function t(e){return document.getElementsByTagName(e)}function n(){s=a.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,r=a.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function c(){var n,o,a,i,l;m.clearRect(0,0,s,r),y.forEach(function(e,t){for(e.x+=e.xa,e.y+=e.ya,e.xa*=e.x>s||e.x<0?-1:1,e.ya*=e.y>r||e.y<0?-1:1,m.fillRect(e.x-.5,e.y-.5,1,1),o=t+1;o<d.length;o++)null!==(n=d[o]).x&&null!==n.y&&(a=e.x-n.x,i=e.y-n.y,(l=a*a+i*i)<n.max)&&(n===h&&l>=n.max/2&&(e.x-=.03*a,e.y-=.03*i),a=(n.max-l)/n.max,m.beginPath(),m.lineWidth=a/2,m.strokeStyle="rgba("+u.c+","+(.2+a)+")",m.moveTo(e.x,e.y),m.lineTo(n.x,n.y),m.stroke())}),w(c)}var s,r,d,o,a=document.createElement("canvas"),u=(i=(o=t("script")).length,o=o[i-1],{l:i,z:e(o,"zIndex",-1),o:e(o,"opacity",.5),c:e(o,"color","0,0,50"),n:e(o,"count",99)}),i="c_n"+u.l,m=a.getContext("2d"),w=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/45)},l=Math.random,h={x:null,y:null,max:2e4};a.id=i,a.style.cssText="position:fixed;top:0;left:0;z-index:"+u.z+";opacity:"+u.o,t("body")[0].appendChild(a),n(),window.onresize=n,window.onmousemove=function(e){e=e||window.event,h.x=e.clientX,h.y=e.clientY},window.onmouseout=function(){h.x=null,h.y=null};for(var y=[],x=0;x<u.n;x++){var f=l()*s,p=l()*r,$=2*l()-1,v=2*l()-1;y.push({x:f,y:p,xa:$,ya:v,max:6e3})}d=y.concat([h]),setTimeout(function(){c()},100)}searchFunc("/search.json","searchTxt","searchResult"),DynamicLine(),document.querySelector("#currentYear").innerText=(new Date).getFullYear();var days=moment().diff($("#runDays")[0].dataset.sinceDate,"days"),lastUpdate=($("#runDays").html(days),$("#runDaysFooter").html(days),moment($("#lastUpdate")[0].dataset.lastUpdate,"YYYY-MM-DD HH:mm:ss").locale("zh-CN").fromNow());$("#lastUpdate").html(lastUpdate),$("#lastUpdateFooter").html(lastUpdate),$("#toTopBtn").click(function(){var e=$(window).scrollTop(),t=parseInt(e/60),n=setInterval(function(){$(window).scrollTop($(window).scrollTop()-t),0===$(window).scrollTop()&&clearInterval(n)},1)}),$.event.add(window,"scroll",function(){$("#toTopBtn").css("transform",0<$(window).scrollTop()?"translateX(-85px)":"translateX(85px)"),$("#toTopBtn").css("transition","all 0.5s")}),$("#loadingBox").hide(),$("body").css("overflow","auto")</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>var element=null;layui.use(["element"],function(){element=layui.element}),$(function(){var e=$("#toc-area"),t=$(e).offset().top;$.event.add(window,"scroll",function(){var o=$(".markdown-body").height(),o=(($(window).scrollTop()+t)/o*100).toFixed(2);element.progress("demo",(o=0==(o=99<o?100:o)?0:o)+"%"),$("#progressTxt").text(o),console.log("percent",o),$(e).css("position",$(window).scrollTop()>t?"fixed":"static"),$(e).css("top",$(window).scrollTop()>t?"60px":""),$("#tocMain").scrollTop($("#tocMain .toc").height()*o*.01)}),$("pre code").each(function(){var o=$(this).attr("class");o="language-"+(null==o||""==o||null==o?"plaintext":o),$(this).attr("class",o)}),$("pre").prepend('<div class="copy-to-clipboard-button"></div>')})</script></html>